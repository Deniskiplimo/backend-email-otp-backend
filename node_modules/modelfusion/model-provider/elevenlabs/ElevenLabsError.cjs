"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.failedElevenLabsCallResponseHandler = void 0;
const ApiCallError_js_1 = require("../../core/api/ApiCallError.cjs");
const failedElevenLabsCallResponseHandler = async ({ response, url, requestBodyValues }) => {
    const responseBody = await response.text();
    try {
        // TODO implement ElevenLabsError
        return new ApiCallError_js_1.ApiCallError({
            message: responseBody,
            statusCode: response.status,
            url,
            requestBodyValues,
        });
    }
    catch (error) {
        if (error instanceof Error) {
            if (error.name === "AbortError" || error instanceof ApiCallError_js_1.ApiCallError) {
                throw error;
            }
        }
        throw new ApiCallError_js_1.ApiCallError({
            message: responseBody,
            cause: error,
            statusCode: response.status,
            url,
            requestBodyValues,
        });
    }
};
exports.failedElevenLabsCallResponseHandler = failedElevenLabsCallResponseHandler;
