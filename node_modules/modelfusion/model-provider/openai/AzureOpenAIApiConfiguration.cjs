"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AzureOpenAIApiConfiguration = void 0;
const AbstractApiConfiguration_js_1 = require("../../core/api/AbstractApiConfiguration.cjs");
const loadApiKey_js_1 = require("../../core/api/loadApiKey.cjs");
/**
 * Cconfiguration for the Azure OpenAI API. This class is responsible for constructing URLs specific to the Azure OpenAI deployment.
 * It creates URLs of the form
 * `https://[resourceName].openai.azure.com/openai/deployments/[deploymentId]/[path]?api-version=[apiVersion]`
 *
 * @see https://learn.microsoft.com/en-us/azure/ai-services/openai/reference
 */
class AzureOpenAIApiConfiguration extends AbstractApiConfiguration_js_1.AbstractApiConfiguration {
    constructor({ resourceName, deploymentId, apiVersion, apiKey, retry, throttle, }) {
        super({ retry, throttle });
        Object.defineProperty(this, "resourceName", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "deploymentId", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "apiVersion", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "headers", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.resourceName = resourceName;
        this.deploymentId = deploymentId;
        this.apiVersion = apiVersion;
        this.headers = {
            "api-key": (0, loadApiKey_js_1.loadApiKey)({
                apiKey,
                environmentVariableName: "AZURE_OPENAI_API_KEY",
                description: "Azure OpenAI",
            }),
        };
    }
    assembleUrl(path) {
        return `https://${this.resourceName}.openai.azure.com/openai/deployments/${this.deploymentId}${path}?api-version=${this.apiVersion}`;
    }
}
exports.AzureOpenAIApiConfiguration = AzureOpenAIApiConfiguration;
