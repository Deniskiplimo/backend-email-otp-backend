import { PromptFormatTextGenerationModel } from "./PromptFormatTextGenerationModel.js";
export class PromptFormatTextStreamingModel extends PromptFormatTextGenerationModel {
    constructor(options) {
        super(options);
    }
    doStreamText(prompt, options) {
        const mappedPrompt = this.promptFormat.format(prompt);
        return this.model.doStreamText(mappedPrompt, options);
    }
    withPromptFormat(promptFormat) {
        return new PromptFormatTextStreamingModel({
            model: this.withSettings({
                stopSequences: [
                    ...(this.settings.stopSequences ?? []),
                    ...promptFormat.stopSequences,
                ],
            }),
            promptFormat,
        });
    }
    withSettings(additionalSettings) {
        return new PromptFormatTextStreamingModel({
            model: this.model.withSettings(additionalSettings),
            promptFormat: this.promptFormat,
        });
    }
}
